\chapter{Build and Install Traffic Simulation Library}
\hypertarget{md__external_2_r_e_a_d_m_e}{}\label{md__external_2_r_e_a_d_m_e}\index{Build and Install Traffic Simulation Library@{Build and Install Traffic Simulation Library}}
\label{md__external_2_r_e_a_d_m_e_autotoc_md0}%
\Hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md0}%
 \hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md1}{}\doxysection{\texorpdfstring{Verifying Git LFS Installation}{Verifying Git LFS Installation}}\label{md__external_2_r_e_a_d_m_e_autotoc_md1}
To check if Git LFS is correctly installed and initialized, you can run\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{git\ lfs\ version}

\end{DoxyCode}


Check if specific files are being tracked by Git LFS using\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{git\ lfs\ ls-\/files}

\end{DoxyCode}


Fetching LFS Files\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{git\ lfs\ pull}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md2}{}\doxysection{\texorpdfstring{Initialize Submodules}{Initialize Submodules}}\label{md__external_2_r_e_a_d_m_e_autotoc_md2}
This will initialize and clone the submodule repository and check out the appropriate commit specified in the parent repository. 
\begin{DoxyCode}{0}
\DoxyCodeLine{git\ submodule\ update\ -\/-\/init\ -\/-\/recursive}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md3}{}\doxysection{\texorpdfstring{Verify the submodule status}{Verify the submodule status}}\label{md__external_2_r_e_a_d_m_e_autotoc_md3}
Ensure that the submodule is now populated correctly. 
\begin{DoxyCode}{0}
\DoxyCodeLine{git\ submodule\ status}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md4}{}\doxysection{\texorpdfstring{Environment setup}{Environment setup}}\label{md__external_2_r_e_a_d_m_e_autotoc_md4}

\begin{DoxyCode}{0}
\DoxyCodeLine{conda\ env\ create\ -\/f\ environment.yml}
\DoxyCodeLine{conda\ activate\ drive}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md5}{}\doxysection{\texorpdfstring{Build and check setup}{Build and check setup}}\label{md__external_2_r_e_a_d_m_e_autotoc_md5}

\begin{DoxyCode}{0}
\DoxyCodeLine{export\ MACOSX\_DEPLOYMENT\_TARGET=14.0}
\DoxyCodeLine{TRAFFIC\_SIM\_SOURCEDIR=\$PWD\ python\ -\/m\ build\ -\/v}
\DoxyCodeLine{unzip\ -\/l\ dist/simulation-\/*.whl}

\end{DoxyCode}


or configure and build a stand alone traffic library 
\begin{DoxyCode}{0}
\DoxyCodeLine{mkdir\ build}
\DoxyCodeLine{cd\ build}
\DoxyCodeLine{cmake\ ..}
\DoxyCodeLine{make}
\DoxyCodeLine{cd\ ..}

\end{DoxyCode}
 This will build the Google Test library (libgtest.\+a and libgtest\+\_\+main.\+a).\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md6}{}\doxysubsection{\texorpdfstring{Install Traffic Simulation}{Install Traffic Simulation}}\label{md__external_2_r_e_a_d_m_e_autotoc_md6}

\begin{DoxyCode}{0}
\DoxyCodeLine{pip\ install\ -\/-\/force-\/reinstall\ dist/simulation-\/*.whl}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md7}{}\doxysubsubsection{\texorpdfstring{Example Usage}{Example Usage}}\label{md__external_2_r_e_a_d_m_e_autotoc_md7}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#\#\ Import\ the\ compiled\ C++\ module}}
\DoxyCodeLine{\textcolor{keyword}{import}\ traffic\_simulation}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#\#\ Create\ a\ traffic\ environment}}
\DoxyCodeLine{simulation\ =\ traffic\_simulation.TrafficSimulation(2)}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#\#\ Retrieve\ the\ current\ states\ of\ agents\ in\ the\ traffic\ environment}}
\DoxyCodeLine{states\ =\ simulation.get\_agent\_positions()}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#\#\ Display\ the\ states\ of\ agents\ in\ the\ traffic\ environment}}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ agent,\ state\ in\ states.items():}
\DoxyCodeLine{\ \ \ \ print(f\textcolor{stringliteral}{"{}\{agent\}\ state:\ \{state\}"{}})}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#\#\ Advance\ the\ environment\ by\ one\ step}}
\DoxyCodeLine{simulation.step([1,\ 0],\ [[0.1,\ 0.2,\ 0.3],\ [0.0,\ 0.0,\ 0.0]])}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#\#\ Update\ the\ states\ of\ agents\ in\ the\ traffic\ environment}}
\DoxyCodeLine{states\ =\ simulation.get\_agent\_positions()}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#\#\ Display\ the\ updated\ states\ of\ agents\ in\ the\ traffic\ environment}}
\DoxyCodeLine{\textcolor{keywordflow}{for}\ agent,\ state\ in\ states.items():}
\DoxyCodeLine{\ \ \ \ print(f\textcolor{stringliteral}{"{}\{agent\}\ state:\ \{state\}"{}})}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md8}{}\doxysubsubsection{\texorpdfstring{Docker build}{Docker build}}\label{md__external_2_r_e_a_d_m_e_autotoc_md8}

\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Build\ docker\ image}
\DoxyCodeLine{export\ DOCKER\_BUILDKIT=1\ }
\DoxyCodeLine{docker-\/compose\ up\ -\/-\/build}
\DoxyCodeLine{\#\ Run\ docker\ image}
\DoxyCodeLine{docker\ run\ -\/it\ -\/-\/rm\ -\/v\ \$(pwd)/data:/app/repo/data\ replicantdrivesim-\/app\ bash}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Alternative\ build\ method}
\DoxyCodeLine{DOCKER\_BUILDKIT=1\ docker\ build\ -\/-\/ssh\ default\ -\/t\ replicantdrivesim-\/app\ .}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Close\ docker\ container}
\DoxyCodeLine{docker-\/compose\ down}
\DoxyCodeLine{docker-\/compose\ down\ -\/-\/volumes}
\DoxyCodeLine{docker-\/compose\ down\ -\/-\/volumes\ -\/-\/remove-\/orphans}
\DoxyCodeLine{}
\DoxyCodeLine{docker\ system\ prune\ -\/a}
\DoxyCodeLine{docker\ system\ prune\ -\/a\ -\/-\/volumes}
\DoxyCodeLine{}
\DoxyCodeLine{docker-\/compose\ ps\ -\/a}
\DoxyCodeLine{docker-\/compose\ logs}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Exec\ into\ the\ Running\ Container\ (app\ is\ name\ of\ service\ in\ docker-\/compose.yml)}
\DoxyCodeLine{docker-\/compose\ exec\ app\ bash}

\end{DoxyCode}



\begin{DoxyCode}{0}
\DoxyCodeLine{python\ simulacrum.py}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#\ Or}}
\DoxyCodeLine{}
\DoxyCodeLine{python\ trainer.py}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md9}{}\doxysubsection{\texorpdfstring{Monitor simulation session}{Monitor simulation session}}\label{md__external_2_r_e_a_d_m_e_autotoc_md9}

\begin{DoxyCode}{0}
\DoxyCodeLine{mlflow\ ui\ -\/-\/backend-\/store-\/uri\ file:mlruns}

\end{DoxyCode}
\hypertarget{md__external_2_r_e_a_d_m_e_autotoc_md10}{}\doxysubsection{\texorpdfstring{Run unit tests}{Run unit tests}}\label{md__external_2_r_e_a_d_m_e_autotoc_md10}

\begin{DoxyCode}{0}
\DoxyCodeLine{./build/tests/traffic\_simulation\_test}
\DoxyCodeLine{./build/tests/perception\_module\_test}

\end{DoxyCode}
 Google Test provides robust features for writing and organizing unit tests in C++. Customize your test structure (TEST\+\_\+F, TEST, etc.) as per your project requirements. 